<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	template="/templates/Menu.xhtml">

	<ui:define name="content">
<h:form id="f126" class="form-horizontal" role="form" >	
<h:messages id="message" style="color:blue" />
<div class="col-sm-12">	
<div class="panel panel-primary">
  <div class="panel-heading">
    <h2 class="panel-title text-center" style="font-weight: bold;" >Cadastro de Solicitações</h2>
  </div>
  <div class="panel-body">		
			<div class="form-group">
			<label class="col-sm-1 control-label">Cliente:</label>
			<h:selectOneMenu style="width:300px" styleClass="form-control" value="#{solicitacaoBean.solicitacao.cliente.id}"
				valueChangeListener="#{solicitacaoBean.clienteMudou}"
				required="true" requiredMessage="Informe/Cadastre um Cliente."
				id="cliente" label="Cliente">
				<f:selectItem itemValue="" itemLabel=" -- Selecione um Cliente -- " />
				<f:selectItems value="#{clienteBean.listagem}" var="cli"
					itemValue="#{cli.id}" itemLabel="#{cli.nomeFantasia}" />
				<f:ajax render="produto" />
			</h:selectOneMenu>
			<h:message for="cliente" />
			</div>
			<br />
			<div class="form-group">
			<label class="col-sm-1 control-label">Assunto:</label>
			<h:inputText styleClass="form-control" value="#{solicitacaoBean.solicitacao.assunto}"
				required="true" requiredMessage="Informe um Assunto." id="assunto"
				style="width:670px" label="Assunto"
				validatorMessage="O tamanho máximo permitido para o Assunto é de 80 caracteres.">
				<f:validateLength maximum="80" />
			</h:inputText>
			<h:message for="assunto" />
			</div>
			<br />
			<div class="form-group">
			<label class="col-sm-1 control-label">Produto:</label>
			<h:selectOneMenu style="width:300px" styleClass="form-control" value="#{solicitacaoBean.solicitacao.produto.id}"
				valueChangeListener="#{solicitacaoBean.produtoMudou}"
				required="true" requiredMessage="Informe/Cadastre um Produto."
				id="produto" label="Produto">
				<f:selectItem itemValue="" itemLabel=" -- Selecione um Produto -- " />
				<f:selectItems value="#{solicitacaoBean.produtosCliente}" var="prod"
					itemValue="#{prod.id}" itemLabel="#{prod.descricao}" />
				<f:ajax render="versao" />
			</h:selectOneMenu>
			<h:message for="produto" />
			</div>
			<br />
			<div class="form-group">
			<label class="col-sm-1 control-label">Versão:</label>
			<h:selectOneMenu style="width:300px" styleClass="form-control" value="#{solicitacaoBean.solicitacao.versao.id}"
				required="true" requiredMessage="Informe/Cadastre uma Versão."
				id="versao" label="Versão">
				<f:selectItem itemValue="" itemLabel=" -- Selecione uma Versão -- " />
				<f:selectItems value="#{solicitacaoBean.versoesProduto}" var="v"
					itemValue="#{v.id}" itemLabel="#{v.descricao}" />
			</h:selectOneMenu>
			<h:message for="versao" />
			</div>
			<br />
			<div class="form-group">
			<label class="col-sm-1 control-label">Tipo de Solicitação:</label>
			<h:selectOneMenu style="width:300px" styleClass="form-control"
				value="#{solicitacaoBean.solicitacao.tipoSolicitacao.id}"
				required="true"
				requiredMessage="Informe/Cadastre um Tipo de Solicitação."
				id="tiposolicitacao" label="Tipo de Solicitação">
				<f:selectItem itemValue=""
					itemLabel=" -- Selecione um Tipo de Solicitação -- " />
				<f:selectItems value="#{tipoSolicitacaoBean.listagem}"
					var="tpsolicitacao" itemValue="#{tpsolicitacao.id}"
					itemLabel="#{tpsolicitacao.descricao}" />
			</h:selectOneMenu>
			<h:message for="tiposolicitacao" />
			</div>
			<br />
			<div class="form-group">
			<label class="col-sm-1 control-label">Prioridade:</label>
			<h:selectOneMenu style="width:300px" styleClass="form-control" value="#{solicitacaoBean.solicitacao.prioridade.id}"
				required="true"
				requiredMessage="Informe/Cadastre uma Prioridade de Solicitação."
				id="prioridade" label="Prioridade">
				<f:selectItem itemValue=""
					itemLabel=" -- Selecione uma Prioridade -- " />
				<f:selectItems value="#{prioridadeBean.listagem}" var="pr"
					itemValue="#{pr.id}" itemLabel="#{pr.descricao}" />
			</h:selectOneMenu>
			<h:message for="prioridade" />
			</div>
			<br />
			<div class="form-group">
			<label class="col-sm-1 control-label">Status:</label>
			<h:selectOneMenu style="width:300px" styleClass="form-control" value="#{solicitacaoBean.solicitacao.status.id}"
				required="true"
				requiredMessage="Informe/Cadastre um Status de Solicitação."
				id="status" label="Status">
				<f:selectItem itemValue="" itemLabel=" -- Selecione um Status -- " />
				<f:selectItems value="#{statusBean.listagem}" var="st"
					itemValue="#{st.id}" itemLabel="#{st.descricao}" />
			</h:selectOneMenu>
			<h:message for="status" />
			</div>
			<br />
			<div class="form-group">
			<label class="col-sm-1 control-label">Sistema Operacional:</label>
			<h:selectOneMenu style="width:300px" styleClass="form-control"
				value="#{solicitacaoBean.solicitacao.sistemaOperacional.id}"
				id="sistemaoperacional" label="Sistema Operacional">
				<f:selectItem itemValue=""	itemLabel=" -- Selecione um Sistema Operacional -- " />
				<f:selectItems value="#{sistemaOperacionalBean.listagem}" var="so"
					itemValue="#{so.id}" itemLabel="#{so.descricao}" />
			</h:selectOneMenu>
			<h:message for="sistemaoperacional" />
			</div>
			<br />
			<br />
			<div class="form-group">
			<label class="col-sm-1 control-label">Problema:</label>
			<h:inputTextarea style="width: 80%;" class="form-control" value="#{solicitacaoBean.solicitacao.problema}"
				rows="10" cols="100" required="true"
				requiredMessage="Informe um Problema." id="problema"
				label="Problema">
			</h:inputTextarea>
			<h:message for="problema" />
			</div>
			<br />
			<br />
			<div class="form-group">
			<label class="col-sm-1 control-label">Solução:</label>
			<h:inputTextarea style="width: 80%;" class="form-control" value="#{solicitacaoBean.solicitacao.solucao}"
				rows="10" cols="100" id="solucao" label="Solução"  >
			</h:inputTextarea>
			<h:message for="solucao" />
			</div>
			<br />
			<div class="form-group">
			<label class="col-sm-1 control-label">Pessoa do Contato:</label>
			<h:inputText class="form-control" value="#{solicitacaoBean.solicitacao.pessoaContato}"
				required="true" requiredMessage="Informe a pessoa do contato."
				id="contato" style="width:254px" label="Pessoa do Contato"
				validatorMessage="O tamanho máximo permitido para a Pessoa do Contato é de 50 caracteres.">
				<f:validateLength maximum="50" />
			</h:inputText>
			<h:message for="contato" />			
			</div>
			
			<br />
			
			<h:inputHidden value="#{solicitacaoBean.solicitacao.responsavel.id}" />
			
			<div class="form-group" >
			<h:panelGroup rendered="#{usuarioBean.eAdmin()}">			
				<label class="col-sm-1 control-label"  >Responsável:</label> 
		       	<h:selectOneMenu class="form-control"  style="width:245px" value="#{solicitacaoBean.solicitacao.responsavel.id}" 
    				id="responsavel" label="Responsável" >
					<f:selectItem itemValue="" itemLabel=" -- Atribua um Responsável -- " />
					<f:selectItems value="#{usuarioBean.listagem}" var="usr"
					itemValue="#{usr.id}" itemLabel="#{usr.nome}" />
			    </h:selectOneMenu>			    
			<h:message for="responsavel" />
			</h:panelGroup>
			</div>
			
			
			<h:inputHidden value="#{solicitacaoBean.solicitacao.id}" />
			
			<h:inputHidden value="#{solicitacaoBean.solicitacao.atendente.id}" />	
			
			
			<h:inputHidden value="#{solicitacaoBean.solicitacao.dataCadastro}">
				<f:convertDateTime pattern="dd/MM/yyyy" type="date"	dateStyle="short" timeZone="GMT-3" />			
			</h:inputHidden>
			<h:inputHidden value="#{solicitacaoBean.solicitacao.horaCadastro}">
				<f:convertDateTime pattern="HH:mm:ss" type="time"	dateStyle="short" timeZone="GMT-3" />
			</h:inputHidden>
			
			<h:inputHidden value="#{solicitacaoBean.solicitacao.dataAtualizacao}">
				<f:convertDateTime pattern="dd/MM/yyyy" type="date"	dateStyle="short" timeZone="GMT-3" />
			</h:inputHidden>
			<h:inputHidden value="#{solicitacaoBean.solicitacao.horaAtualizacao}">
				<f:convertDateTime pattern="HH:mm:ss" type="time"	dateStyle="short" timeZone="GMT-3" />
			</h:inputHidden>
	</div>
	</div>
	</div>
	&nbsp;&nbsp;&nbsp;&nbsp;<h:commandButton value="Salvar" action="#{solicitacaoBean.salvar}" class="btn btn-large btn-primary" />
			&nbsp;
			<h:commandButton value="Cancelar" action="/views/principal"	immediate="true" class="btn btn-large btn-primary" />
		</h:form>	
	</ui:define>
</ui:composition>
