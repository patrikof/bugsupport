<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	template="/templates/Menu.xhtml">

	<ui:define name="content">
		<h:head>
			<script type="text/javascript"
				src="#{request.contextPath}/resources/javascript/listaSolicitacao.js"
				charset="UTF-8"></script>

			<script type="text/javascript">
				var tr;
				 function removerSolicitacao(id) 
				 {
					 tr=$('#rm_'+id).closest('tr');
				   $.get(contextPath+"/SolicitacaoGsonServlet?id_rm=" + id, function(r){
					   if(!r.erro){
						   
						   tr.remove(); 
						   
					   }
					   alert(r.mensagem);
				   },"json");
				  
				 }
			</script>

		</h:head>
		<h:form id="f132" class="form-horizontal no-print" role="form">
			<div class="col-sm-12">
				<div class="panel panel-primary">
					<div class="panel-heading">
						<h2 class="panel-title text-center no-print"
							style="font-weight: bold;">Pesquisa de Solicitações</h2>
					</div>
					<div class="panel-body">
						<div class="row">
							<div class="col-xs-12 col-sm-6 col-md-4">
								<div class="">
									<div class="">
										<label class="control-label">Código da Solicitação:</label>
										<h:inputText class="form-control"
											value="#{buscaSolicitacaoBean.id}" id="codigo"
											label="Código da Solicitação"
											converterMessage="Digite apenas números inteiros.">
											<f:convertNumber integerOnly="true" />
										</h:inputText>
										<h:message for="codigo" />
									</div>
								</div>
							</div>

							<div class="col-xs-12 col-sm-6 col-md-4">
								<div class="">
									<div class="">
										<label class="control-label">Tipo de Solicitação:</label>

										<h:selectOneMenu class="form-control"
											value="#{buscaSolicitacaoBean.tipoSolicitacao}"
											id="tiposolicitacao" label="Tipo de Solicitação">
											<f:selectItem itemValue="" itemLabel=" -- Selecionar -- " />
											<f:selectItems value="#{tipoSolicitacaoBean.listagem}"
												var="tpsolicitacao" itemValue="#{tpsolicitacao.id}"
												itemLabel="#{tpsolicitacao.descricao}" />
										</h:selectOneMenu>
										<h:message for="tiposolicitacao" />
									</div>
								</div>
							</div>

							<div class="col-xs-12 col-sm-6 col-md-4">
								<div class="">
									<div class="">
										<label class="control-label">Status:</label>
										<h:selectOneMenu class="form-control"
											value="#{buscaSolicitacaoBean.status}" id="status"
											label="Status">
											<f:selectItem itemValue="" itemLabel=" -- Selecionar -- " />
											<f:selectItems value="#{statusBean.listagem}" var="st"
												itemValue="#{st.id}" itemLabel="#{st.descricao}" />
										</h:selectOneMenu>
										<h:message for="status" />
									</div>
								</div>
							</div>
						</div>

						<div class="row">
							<div class="col-xs-12 col-sm-6 col-md-4">
								<div class="">
									<label class="control-label">Data de Cadastro:</label>
									<div class="input-group">
										<h:inputText id="dtCadIni"
											value="#{buscaSolicitacaoBean.dataCadastroInicial}"
											class="form-control form_date">
											<f:convertDateTime pattern="dd/MM/yyyy" type="date"
												dateStyle="short" timeZone="GMT-3" />
										</h:inputText>
										<label class="input-group-addon">a</label>
										<h:inputText id="dtCadFim"
											value="#{buscaSolicitacaoBean.dataCadastroFinal}"
											class="form-control form_date">
											<f:convertDateTime pattern="dd/MM/yyyy" type="date"
												dateStyle="short" timeZone="GMT-3" />
										</h:inputText>
									</div>
								</div>
							</div>
							<div class="col-xs-12 col-sm-6 col-md-4">
								<div class="">
									<div class="">
										<label class="control-label">Versão:</label>
										<h:selectOneMenu class="form-control"
											value="#{buscaSolicitacaoBean.versao}" id="versao"
											label="Versão">
											<f:selectItem itemValue="" itemLabel=" -- Selecionar -- " />
											<f:selectItems value="#{versaoBean.listagem}" var="v"
												itemValue="#{v.id}" itemLabel="#{v.descricao}" />
										</h:selectOneMenu>
										<h:message for="versao" />
									</div>
								</div>
							</div>

							<div class="col-xs-12 col-sm-6 col-md-4">
								<div class="">
									<div class="">
										<label class="control-label">Cliente:</label>
										<h:selectOneMenu class="form-control"
											value="#{buscaSolicitacaoBean.cliente}" id="cliente"
											label="Cliente">
											<f:selectItem itemValue="" itemLabel=" -- Selecionar -- " />
											<f:selectItems value="#{clienteBean.listagem}" var="cli"
												itemValue="#{cli.id}" itemLabel="#{cli.nomeFantasia}" />
										</h:selectOneMenu>
										<h:message for="cliente" />
									</div>
								</div>
							</div>
						</div>

						<div class="row">
							<div class="col-xs-12 col-sm-6 col-md-4">
								<div class="">
									<label class="control-label">Data de Alteração:</label>
									<div class="input-group">
										<h:inputText id="dtAltIni"
											value="#{buscaSolicitacaoBean.dataAtualizacaoInicial}"
											class="form-control form_date">
											<f:convertDateTime pattern="dd/MM/yyyy" type="date"
												dateStyle="short" timeZone="GMT-3" />
										</h:inputText>
										<span class="input-group-addon">a</span>
										<h:inputText id="dtAltFim"
											value="#{buscaSolicitacaoBean.dataAtualizacaoFinal}"
											class="form-control form_date">
											<f:convertDateTime pattern="dd/MM/yyyy" type="date"
												dateStyle="short" timeZone="GMT-3" />
										</h:inputText>

									</div>
								</div>
							</div>
							<div class="col-xs-12 col-sm-6 col-md-4">
								<div class="">
									<div class="">
										<label class="control-label">Pessoa do Contato:</label>
										<h:inputText class="form-control"
											value="#{buscaSolicitacaoBean.pessoaContato}" id="contato"
											label="Pessoa do Contato"
											validatorMessage="O tamanho máximo permitido para a Pessoa do Contato é de 50 caracteres.">
											<f:validateLength maximum="50" />
										</h:inputText>
										<h:message for="contato" />
									</div>
								</div>
							</div>
							<div class="col-xs-12 col-sm-6 col-md-4">
								<div class="">
									<div class="">
										<label class="control-label">Prioridade:</label>
										<h:selectOneMenu class="form-control"
											value="#{buscaSolicitacaoBean.prioridade}" id="prioridade"
											label="Prioridade">
											<f:selectItem itemValue="" itemLabel=" -- Selecionar -- " />
											<f:selectItems value="#{prioridadeBean.listagem}" var="pr"
												itemValue="#{pr.id}" itemLabel="#{pr.descricao}" />
										</h:selectOneMenu>
										<h:message for="prioridade" />
									</div>
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col-xs-12 col-sm-6 col-md-4">
								<div class="">
									<div class="">
										<label class="control-label">Produto:</label>
										<h:selectOneMenu class="form-control"
											value="#{buscaSolicitacaoBean.produto}" id="produto"
											label="Produto">
											<f:selectItem itemValue="" itemLabel=" -- Selecionar -- " />
											<f:selectItems value="#{produtoBean.listagem}" var="prod"
												itemValue="#{prod.id}" itemLabel="#{prod.descricao}" />
										</h:selectOneMenu>
										<h:message for="produto" />
									</div>
								</div>
							</div>
							<div class="col-xs-12 col-sm-6 col-md-4">
								<div class="">
									<div class="">
										<label class="control-label">Assunto:</label>
										<h:inputText class="form-control"
											value="#{buscaSolicitacaoBean.assunto}" id="assunto"
											label="Assunto"
											validatorMessage="O tamanho máximo permitido para o Assunto é de 80 caracteres.">
											<f:validateLength maximum="80" />
										</h:inputText>
										<h:message for="assunto" />
									</div>
								</div>
							</div>
							<div class="col-xs-12 col-sm-6 col-md-4">
								<div class="">
									<div class="">
										<label class="control-label">Responsável:</label>
										<h:selectOneMenu class="form-control"
											value="#{buscaSolicitacaoBean.responsavel}" id="responsavel"
											label="Responsável">
											<f:selectItem itemValue="" itemLabel=" -- Selecionar -- " />
											<f:selectItem itemValue="-1"
												itemLabel=" -- Não Atribuido -- " />
											<f:selectItems value="#{usuarioBean.listagem}" var="usrResp"
												itemValue="#{usrResp.id}" itemLabel="#{usrResp.nome}" />
										</h:selectOneMenu>
										<h:message for="responsavel" />
									</div>

								</div>
							</div>
						</div>

						<div class="row">
							<div class="col-xs-12 col-sm-6 col-md-4">
								<div class="">
									<div class="">
										<label class="control-label">Sistema Operacional:</label>
										<h:selectOneMenu class="form-control"
											value="#{buscaSolicitacaoBean.sistemaOperacional}"
											id="sistemaoperacional" label="Sistema Operacional">
											<f:selectItem itemValue="" itemLabel=" -- Selecionar -- " />
											<f:selectItems value="#{sistemaOperacionalBean.listagem}"
												var="so" itemValue="#{so.id}" itemLabel="#{so.descricao}" />
										</h:selectOneMenu>
										<h:message for="sistemaoperacional" />
									</div>
								</div>
							</div>
							<div class="col-xs-12 col-sm-6 col-md-4">
								<div class="">
									<div class="">
										<label class="control-label">Atendente:</label>
										<h:selectOneMenu class="form-control"
											value="#{buscaSolicitacaoBean.atendente}" id="atendente"
											label="Atendente">
											<f:selectItem itemValue="" itemLabel=" -- Selecionar -- " />
											<f:selectItem itemValue="-1"
												itemLabel=" -- Não Atribuido -- " />
											<f:selectItems value="#{usuarioBean.listagem}" var="usrAtend"
												itemValue="#{usrAtend.id}" itemLabel="#{usrAtend.nome}" />
										</h:selectOneMenu>
										<h:message for="responsavel" />
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			&nbsp;&nbsp;&nbsp;&nbsp;
			<h:commandButton value="Pesquisar"
				id="btnPesquisa" action="/SolicitacaoGsonServlet"
				class="btn btn-large btn-primary" />                 
            &nbsp;
			<h:commandButton value="Limpar Pesquisa" id="btnLimpar"
				action="#{buscaSolicitacaoBean.listar}"
				class="btn btn-large btn-primary" />
		</h:form>
		<br />

		<h:form>
			<h:messages id="message" style="color:blue" />
			<div class="col-sm-12">
				<div class="panel panel-primary">
					<div class="panel-heading">
						<h2 class="panel-title text-center" style="font-weight: bold;">Relação
							de Solicitações</h2>
					</div>
					<div class="table-responsive">
						<div class="">

							<table id="listaSolicitacao" class="display paginacaoDinamica">
								<thead>
									<tr>
										<th>Código</th>
										<th>Cliente</th>
										<th>Tipo</th>
										<th>Produto</th>
										<th>Assunto</th>
										<th>Responsável</th>
										<th>Contato</th>
										<th>Cadastro</th>
										<th><h:outputText
												styleClass="glyphicon glyphicon-list-alt  no-print" /></th>
										<th><h:outputText
												styleClass="glyphicon glyphicon-user  no-print" /></th>
										<th><h:outputText
												styleClass="glyphicon glyphicon-edit  no-print" /></th>
										<th><h:outputText
												styleClass="glyphicon glyphicon-remove  no-print" /></th>
									</tr>
								</thead>
								<tbody>
								</tbody>
							</table>
						</div>
					</div>
				</div>
			</div>
		</h:form>
	</ui:define>
</ui:composition>